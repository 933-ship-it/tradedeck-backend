const _0x5d26ea=_0x8c6b;(function(_0x4fe3ad,_0x46d082){const _0x5e7380=_0x8c6b,_0x3423d8=_0x4fe3ad();while(!![]){try{const _0x3fa6d1=-parseInt(_0x5e7380(0x18b))/0x1*(parseInt(_0x5e7380(0x16a))/0x2)+-parseInt(_0x5e7380(0xb1))/0x3*(parseInt(_0x5e7380(0x13e))/0x4)+parseInt(_0x5e7380(0x12c))/0x5+parseInt(_0x5e7380(0xe0))/0x6+-parseInt(_0x5e7380(0x14a))/0x7+parseInt(_0x5e7380(0x143))/0x8+-parseInt(_0x5e7380(0xc1))/0x9*(-parseInt(_0x5e7380(0x109))/0xa);if(_0x3fa6d1===_0x46d082)break;else _0x3423d8['push'](_0x3423d8['shift']());}catch(_0x6042ec){_0x3423d8['push'](_0x3423d8['shift']());}}}(_0x4de1,0xd3424));import{initializeApp}from'https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js';import{getAuth,onAuthStateChanged,signOut,deleteUser}from'https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js';import{getFirestore,collection,doc,setDoc,getDoc,getDocs,addDoc,updateDoc,deleteDoc,query,where,orderBy,serverTimestamp,onSnapshot,runTransaction}from'https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js';function _0x4de1(){const _0x959094=['match','detailProductPrice','</p>','order','paypalEmailContainer','dropdownMenu','productList','Failed\x20to\x20send\x20email:','noProductsMessage','given_name','trim','removeItem','bg-green-600','Error\x20loading\x20products:','detailActionButton','editTitle','contains','Image\x20upload\x20failed.\x20Please\x20try\x20again.','47780EWmEZZ','uid','none','error','previewImageContainer','<li>','docs','get','Preview\x20image\x20selection\x20cancelled\x20or\x20not\x20provided.','G-4RXR7V9NCW','stopPropagation','application/json','photoURL','Product\x20listed\x20successfully!','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','formErrorSummary','Error\x20loading\x20user\x27s\x20products:','description','</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-auto\x20flex\x20justify-between\x20items-center\x20pt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-bold\x20text-blue-600\x22>','w-full\x20py-3\x20rounded-xl\x20font-semibold\x20transition','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-auto\x20flex\x20justify-end\x20items-center\x20pt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','https://via.placeholder.com/300x200?text=Product+Preview','stringify','Image\x20uploaded:\x20','Failed\x20to\x20update\x20product.','(no\x20email)','toFixed','disabled','secure_url','hover:bg-green-700','visibility','searchBar','value','signOutBtn','tradedeck-82bbb.appspot.com','1431650okhUqp','getItem','Uploading\x20','email','desejdvif','DOMContentLoaded','Delete\x20your\x20account?\x20This\x20cannot\x20be\x20undone.','<p\x20class=\x22text-red-600\x22>PayPal\x20buttons\x20could\x20not\x20be\x20loaded.\x20Please\x20refresh.</p>','onsubmit','Product\x20title\x20is\x20required.','replace','cancelEditBtn','.delist-product-btn','input-invalid','submitProductBtn','message','Loading\x20products...','flex','4csUepd','parse','setAttribute','style','details','3198592prjsKI','Product\x20description\x20is\x20required.','code','hidden','previewImageUrl','filter','Download\x20','8319759rtVPDP','remove','noMyProductsMessage','sellerBalance','https://drive.google.com/uc?export=download&id=','getAttribute','755235931546','Email\x20sent\x20successfully:','join','target','\x22\x20class=\x22px-3\x20py-1\x20bg-gray-600\x20text-white\x20rounded\x20hover:bg-gray-700\x20transition\x22>Download</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-product-id=\x22','Price\x20must\x20be\x20zero\x20or\x20a\x20positive\x20number.','paypal','myProducts','data','length','balances','\x22\x20target=\x22_blank\x22\x20class=\x22w-full\x20block\x20bg-green-600\x20hover:bg-green-700\x20text-white\x20text-center\x20py-3\x20rounded-xl\x20mt-2\x20font-semibold\x20transition\x22>Download\x20Product</a>','success','No\x20products\x20listed\x20on\x20the\x20dashboard.','POST','add','editProductModal','addEventListener','classList','test','Error\x20delisting\x20product.\x20Please\x20try\x20again.\x20(Check\x20Firestore\x20rules\x20if\x20it\x20fails)','page','Download','...','List\x20Product','getElementById','2642GKXSAH','\x22\x20alt=\x22','image','TradeDeckSellForm','input','paypalEmail','Unknown','local','cloudinary','AIzaSyA0RFkuXJjh7X43R6wWdQKrXtdUwVJ-4js','dashboard','Error\x20loading\x20products.\x20Please\x20try\x20again.','Error\x20adding\x20document\x20to\x20Firestore:','No\x20products\x20found\x20for\x20your\x20search.\x20Try\x20different\x20keywords!','paypal-button-container','Error\x20loading\x20product\x20details.\x20Please\x20try\x20again.','number','currentPreviewImage','home','png','userEmail','1:755235931546:web:7e35364b0157cd7fc2a623','balance','format','set','removeAttribute','\x20preview\x22\x20class=\x22rounded\x20mb-3\x20h-48\x20object-cover\x20w-full\x22/>\x0a\x20\x20\x20\x20\x20\x20<h3\x20class=\x22font-semibold\x20text-lg\x20mb-1\x22>','fileUrl','Product\x20preview\x20image\x20is\x20required.','some','sellerId','No\x20products\x20found\x20matching\x20your\x20search.','render','219VFoLlL','Failed\x20to\x20send\x20email\x20notification\x20to\x20seller.','default','info','toString','previewImageStatus','</li>','textContent','aria-label','allProducts','Error\x20verifying\x20payment:','onclick','productForm','detailProductImage','name','payer','data-product-id','cursor-not-allowed','Free','price','editProductId','bg-white\x20rounded-lg\x20shadow\x20p-4\x20flex\x20flex-col\x20product-card\x20','loading','4910262MsWyIU','createdAt','Valid\x20PayPal\x20email\x20is\x20required\x20for\x20paid\x20products.','querySelector','Product\x20not\x20found.','Buttons','<p\x20class=\x22text-center\x20text-red-600\x22>Error\x20loading\x20your\x20products.<br>','toLowerCase','push','createElement','productFileUrlInput','original_filename','An\x20error\x20occurred\x20during\x20payment\x20verification.\x20Please\x20try\x20again.','products','asset_selected','userProfilePic','5778ZWfVyM','\x22\x20class=\x22delist-product-btn\x20px-3\x20py-1\x20bg-red-600\x20text-white\x20rounded\x20hover:bg-red-700\x20transition\x20ml-2\x22>Delist</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','preventDefault','map','deleteAccountBtn','tradedeck-82bbb','data-tab','editDescription','title','bg-blue-100','appendChild','sellLandingContent','className','Error\x20removing\x20document:\x20','click','location','productFileUrl','\x22\x20target=\x22_blank\x22\x20download=\x22','<ul>','You\x20must\x20be\x20signed\x20in\x20to\x20list\x20a\x20product.','innerHTML','close','sell','Error\x20loading\x20product\x20details:','open','detailProductDescription','Unknown\x20error','/api/send-email','reset','includes','1357656xPCXgC','Payment\x20verification\x20failed:','setItem','querySelectorAll','Failed\x20to\x20delete\x20account:\x20','href','Payment\x20could\x20not\x20be\x20completed.\x20Please\x20try\x20again.','Are\x20you\x20sure\x20you\x20want\x20to\x20permanently\x20delist\x20this\x20product?\x20This\x20action\x20cannot\x20be\x20undone.','Please\x20sign\x20out\x20and\x20sign\x20in\x20again,\x20then\x20try\x20deleting\x20your\x20account.','exists','Failed\x20to\x20list\x20product.\x20Please\x20try\x20again.','Account\x20deleted.','productDetails','forEach','div','event','editFileUrl','required','aside\x20nav\x20a[data-tab]','currentUser','display','json','src'];_0x4de1=function(){return _0x959094;};return _0x4de1();}const CLOUDINARY_CLOUD_NAME=_0x5d26ea(0x130),CLOUDINARY_UPLOAD_PRESET='TradeDeck\x20user\x20products',SELL_FORM_KEY=_0x5d26ea(0x16d),LANDING_URL='https://933-ship-it.github.io/TradeDeck.com/',firebaseConfig={'apiKey':_0x5d26ea(0x173),'authDomain':'tradedeck-82bbb.firebaseapp.com','projectId':_0x5d26ea(0xc7),'storageBucket':_0x5d26ea(0x12b),'messagingSenderId':_0x5d26ea(0x150),'appId':_0x5d26ea(0x17f),'measurementId':_0x5d26ea(0x112)},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app),profilePic=document[_0x5d26ea(0x169)](_0x5d26ea(0xc0)),dropdownMenu=document[_0x5d26ea(0x169)](_0x5d26ea(0xfc)),userEmail=document[_0x5d26ea(0x169)](_0x5d26ea(0x17e)),authOverlay=document[_0x5d26ea(0x169)]('authOverlay');let userGlobal=null;const tabs=document[_0x5d26ea(0xe3)](_0x5d26ea(0xf2)),sections=document['querySelectorAll']('main\x20section'),startSellingBtn=document[_0x5d26ea(0x169)]('startSellingBtn'),sellLandingContent=document[_0x5d26ea(0x169)](_0x5d26ea(0xcd)),productForm=document[_0x5d26ea(0x169)](_0x5d26ea(0xa6)),formErrorSummary=document[_0x5d26ea(0x169)](_0x5d26ea(0x118)),titleInput=document['getElementById'](_0x5d26ea(0xca)),descriptionInput=document['getElementById']('description'),priceInput=document[_0x5d26ea(0x169)](_0x5d26ea(0xad)),paypalEmailContainer=document[_0x5d26ea(0x169)](_0x5d26ea(0xfb)),paypalEmailInput=document[_0x5d26ea(0x169)](_0x5d26ea(0x16f)),paypalEmailValidationMsg=document[_0x5d26ea(0x169)]('paypalEmailValidationMsg'),productFileUrlInput=document[_0x5d26ea(0x169)](_0x5d26ea(0xbb)),openPreviewImageWidgetBtn=document[_0x5d26ea(0x169)]('openPreviewImageWidget'),previewImageUrlInput=document['getElementById'](_0x5d26ea(0x147)),previewImageStatus=document[_0x5d26ea(0x169)](_0x5d26ea(0x190)),previewImageContainer=document[_0x5d26ea(0x169)](_0x5d26ea(0x10d)),currentPreviewImage=document[_0x5d26ea(0x169)](_0x5d26ea(0x17b)),productUploadForm=document[_0x5d26ea(0x169)]('productUploadForm'),submitProductBtn=document['getElementById'](_0x5d26ea(0x13a)),searchBar=document[_0x5d26ea(0x169)](_0x5d26ea(0x128)),productListContainer=document['getElementById'](_0x5d26ea(0xfd)),noProductsMessage=document[_0x5d26ea(0x169)](_0x5d26ea(0xff)),myProductsContainer=document[_0x5d26ea(0x169)](_0x5d26ea(0x157)),noMyProductsMessage=document[_0x5d26ea(0x169)](_0x5d26ea(0x14c)),sellerBalance=document[_0x5d26ea(0x169)](_0x5d26ea(0x14d)),productDetailsSection=document[_0x5d26ea(0x169)](_0x5d26ea(0xec)),backToHomeBtn=document[_0x5d26ea(0x169)]('backToHomeBtn'),detailProductImage=document[_0x5d26ea(0x169)](_0x5d26ea(0xa7)),detailProductTitle=document[_0x5d26ea(0x169)]('detailProductTitle'),detailProductDescription=document['getElementById'](_0x5d26ea(0xdb)),detailProductPrice=document[_0x5d26ea(0x169)](_0x5d26ea(0xf8)),detailActionButton=document['getElementById'](_0x5d26ea(0x105)),productDetailsError=document[_0x5d26ea(0x169)]('productDetailsError'),paypalButtonContainer=document[_0x5d26ea(0x169)](_0x5d26ea(0x178)),editProductModal=document[_0x5d26ea(0x169)](_0x5d26ea(0x160)),editProductForm=document['getElementById']('editProductForm'),editProductIdInput=document['getElementById'](_0x5d26ea(0xae)),editTitleInput=document[_0x5d26ea(0x169)](_0x5d26ea(0x106)),editDescriptionInput=document[_0x5d26ea(0x169)](_0x5d26ea(0xc9)),editPriceInput=document[_0x5d26ea(0x169)]('editPrice'),editFileUrlInput=document['getElementById'](_0x5d26ea(0xf0)),cancelEditBtn=document[_0x5d26ea(0x169)](_0x5d26ea(0x137));document['body'][_0x5d26ea(0x141)][_0x5d26ea(0x127)]=_0x5d26ea(0x146),onAuthStateChanged(auth,_0x42aaef=>{const _0x154928=_0x5d26ea;document['body'][_0x154928(0x141)][_0x154928(0x127)]='',!_0x42aaef?(authOverlay[_0x154928(0x141)][_0x154928(0xf4)]=_0x154928(0x13d),userGlobal=null):(authOverlay[_0x154928(0x141)][_0x154928(0xf4)]=_0x154928(0x10b),userGlobal=_0x42aaef,showProfileUI(_0x42aaef));});async function sendSaleEmail({to_email:_0x19645a,product_title:_0x20948f,buyer_name:_0x410031}){const _0x87f6c3=_0x5d26ea;try{const _0x3482eb=await fetch(_0x87f6c3(0xdd),{'method':'POST','headers':{'Content-Type':_0x87f6c3(0x114)},'body':JSON['stringify']({'to_email':_0x19645a,'product_title':_0x20948f,'buyer_name':_0x410031})}),_0x5fba89=await _0x3482eb[_0x87f6c3(0xf5)]();_0x3482eb['ok']?console['log'](_0x87f6c3(0x151),_0x5fba89[_0x87f6c3(0x13b)]):(console[_0x87f6c3(0x10c)](_0x87f6c3(0xfe),_0x5fba89[_0x87f6c3(0x13b)]||_0x87f6c3(0xdc)),alert(_0x87f6c3(0x18c)));}catch(_0x451ea6){console[_0x87f6c3(0x10c)]('Error\x20sending\x20email:',_0x451ea6),alert('An\x20error\x20occurred\x20while\x20sending\x20email\x20notification.');}}function showProfileUI(_0x5f4d78){const _0x57539d=_0x5d26ea;if(!_0x5f4d78)return;profilePic[_0x57539d(0xf6)]=_0x5f4d78[_0x57539d(0x115)]||'https://ui-avatars.com/api/?name='+encodeURIComponent(_0x5f4d78[_0x57539d(0x12f)]||'U'),profilePic[_0x57539d(0x162)][_0x57539d(0x14b)]('hidden'),userEmail[_0x57539d(0x192)]=_0x5f4d78['email']||_0x57539d(0x122),profilePic['onclick']=function(_0x3a3fe8){_0x3a3fe8['stopPropagation'](),dropdownMenu['classList']['toggle']('hidden');},document[_0x57539d(0x161)]('click',_0x3e527a=>{const _0x3fa8f3=_0x57539d;!profilePic[_0x3fa8f3(0x107)](_0x3e527a[_0x3fa8f3(0x153)])&&!dropdownMenu[_0x3fa8f3(0x107)](_0x3e527a[_0x3fa8f3(0x153)])&&dropdownMenu[_0x3fa8f3(0x162)][_0x3fa8f3(0x15f)](_0x3fa8f3(0x146));}),document[_0x57539d(0x169)](_0x57539d(0xc6))['onclick']=async()=>{const _0x4838d9=_0x57539d;if(confirm(_0x4838d9(0x132)))try{await deleteUser(_0x5f4d78),alert(_0x4838d9(0xeb)),window['location'][_0x4838d9(0xe5)]=LANDING_URL;}catch(_0xa1d115){_0xa1d115[_0x4838d9(0x145)]==='auth/requires-recent-login'?alert(_0x4838d9(0xe8)):alert(_0x4838d9(0xe4)+_0xa1d115['message']);}},document[_0x57539d(0x169)](_0x57539d(0x12a))['onclick']=()=>{signOut(auth);};}function showTab(_0x1bf079){const _0x127df8=_0x5d26ea;tabs['forEach'](_0x52e416=>{const _0x10fc83=_0x8c6b;_0x52e416[_0x10fc83(0x162)][_0x10fc83(0x14b)](_0x10fc83(0xcb)),_0x52e416[_0x10fc83(0x183)]('aria-current');});const _0x3d96bf=document[_0x127df8(0xb4)]('a[data-tab=\x22'+_0x1bf079+'\x22]');_0x3d96bf&&(_0x3d96bf['classList'][_0x127df8(0x15f)](_0x127df8(0xcb)),_0x3d96bf['setAttribute']('aria-current',_0x127df8(0x165))),sections[_0x127df8(0xed)](_0x90bc50=>{const _0x1a57a9=_0x127df8;if(_0x90bc50['id']===_0x1bf079)_0x90bc50[_0x1a57a9(0x162)][_0x1a57a9(0x14b)](_0x1a57a9(0x146));else _0x90bc50[_0x1a57a9(0x162)][_0x1a57a9(0x15f)]('hidden');});}tabs[_0x5d26ea(0xed)](_0x5e3224=>{const _0x33e356=_0x5d26ea;_0x5e3224[_0x33e356(0x161)](_0x33e356(0xd0),async _0x586047=>{const _0x5b0e36=_0x33e356;_0x586047['preventDefault']();const _0x11ea85=_0x5e3224['getAttribute'](_0x5b0e36(0xc8));showTab(_0x11ea85);_0x11ea85!==_0x5b0e36(0xd8)&&!productForm[_0x5b0e36(0x162)][_0x5b0e36(0x107)](_0x5b0e36(0x146))&&toggleProductForm(![]);productDetailsSection[_0x5b0e36(0x162)][_0x5b0e36(0x15f)]('hidden');if(_0x11ea85===_0x5b0e36(0x17c))await loadProducts(searchBar[_0x5b0e36(0x129)][_0x5b0e36(0x101)]()),searchBar[_0x5b0e36(0x129)]='';else _0x11ea85===_0x5b0e36(0x174)&&await showDashboard();});}),backToHomeBtn['addEventListener'](_0x5d26ea(0xd0),()=>{const _0x79545d=_0x5d26ea;showTab(_0x79545d(0x17c)),loadProducts(searchBar[_0x79545d(0x129)][_0x79545d(0x101)]());}),startSellingBtn['addEventListener']('click',()=>{toggleProductForm(!![]);});function toggleProductForm(_0x12a0f8){const _0x2dae9b=_0x5d26ea;_0x12a0f8?(sellLandingContent[_0x2dae9b(0x162)][_0x2dae9b(0x15f)]('hidden'),productForm['classList'][_0x2dae9b(0x14b)](_0x2dae9b(0x146)),showTab('sell'),productUploadForm[_0x2dae9b(0xde)](),restoreSellForm(),enableSubmitButton()):(sellLandingContent[_0x2dae9b(0x162)]['remove'](_0x2dae9b(0x146)),productForm[_0x2dae9b(0x162)]['add'](_0x2dae9b(0x146)));}function saveSellForm(){const _0x2e2f01=_0x5d26ea,_0x3151c2={'title':titleInput['value'],'description':descriptionInput[_0x2e2f01(0x129)],'price':priceInput[_0x2e2f01(0x129)],'paypalEmail':paypalEmailInput[_0x2e2f01(0x129)],'previewImageUrl':previewImageUrlInput['value'],'productFileUrl':productFileUrlInput[_0x2e2f01(0x129)]};localStorage[_0x2e2f01(0xe2)](SELL_FORM_KEY,JSON[_0x2e2f01(0x11f)](_0x3151c2));}function restoreSellForm(){const _0x106e54=_0x5d26ea,_0x34de1d=JSON[_0x106e54(0x13f)](localStorage[_0x106e54(0x12d)](SELL_FORM_KEY)||'{}');titleInput['value']=_0x34de1d['title']||'',descriptionInput['value']=_0x34de1d[_0x106e54(0x11a)]||'',priceInput['value']=_0x34de1d[_0x106e54(0xad)]||'',paypalEmailInput[_0x106e54(0x129)]=_0x34de1d[_0x106e54(0x16f)]||'',previewImageUrlInput[_0x106e54(0x129)]=_0x34de1d[_0x106e54(0x147)]||'',productFileUrlInput[_0x106e54(0x129)]=_0x34de1d[_0x106e54(0xd2)]||'';_0x34de1d[_0x106e54(0x147)]?(currentPreviewImage[_0x106e54(0xf6)]=_0x34de1d[_0x106e54(0x147)],previewImageContainer[_0x106e54(0x162)][_0x106e54(0x14b)](_0x106e54(0x146))):(previewImageContainer[_0x106e54(0x162)][_0x106e54(0x15f)](_0x106e54(0x146)),currentPreviewImage['src']='');const _0x3ebc65=parseFloat(_0x34de1d[_0x106e54(0xad)]);!isNaN(_0x3ebc65)&&_0x3ebc65>0x0?(paypalEmailContainer[_0x106e54(0x162)][_0x106e54(0x14b)]('hidden'),paypalEmailInput[_0x106e54(0x140)]('required','required')):(paypalEmailContainer[_0x106e54(0x162)][_0x106e54(0x15f)](_0x106e54(0x146)),paypalEmailInput[_0x106e54(0x183)](_0x106e54(0xf1)));}[titleInput,descriptionInput,priceInput,paypalEmailInput,previewImageUrlInput,productFileUrlInput][_0x5d26ea(0xed)](_0x471b46=>{const _0x16fd0f=_0x5d26ea;_0x471b46[_0x16fd0f(0x161)]('input',saveSellForm);}),document[_0x5d26ea(0x161)](_0x5d26ea(0x131),restoreSellForm);let isPreviewImageUploading=![];const previewImageWidget=window[_0x5d26ea(0x172)]['createUploadWidget']({'cloudName':CLOUDINARY_CLOUD_NAME,'uploadPreset':CLOUDINARY_UPLOAD_PRESET,'sources':[_0x5d26ea(0x171)],'resourceType':_0x5d26ea(0x16c),'clientAllowedFormats':['jpg','jpeg',_0x5d26ea(0x17d),'gif','svg'],'maxFileSize':0xa*0x400*0x400,'multiple':![],'folder':'tradedeck_product_previews'},(_0x57c562,_0x4dffe0)=>{const _0x27b66b=_0x5d26ea;if(!_0x57c562&&_0x4dffe0&&_0x4dffe0[_0x27b66b(0xef)]===_0x27b66b(0x15c))previewImageUrlInput[_0x27b66b(0x129)]=_0x4dffe0[_0x27b66b(0x18e)][_0x27b66b(0x125)],setFileInputStatus(previewImageStatus,_0x27b66b(0x120)+_0x4dffe0['info'][_0x27b66b(0xbc)]+'.'+_0x4dffe0[_0x27b66b(0x18e)][_0x27b66b(0x181)],'success'),openPreviewImageWidgetBtn[_0x27b66b(0x162)][_0x27b66b(0x14b)](_0x27b66b(0x139)),currentPreviewImage[_0x27b66b(0xf6)]=_0x4dffe0[_0x27b66b(0x18e)][_0x27b66b(0x125)],previewImageContainer[_0x27b66b(0x162)]['remove'](_0x27b66b(0x146)),isPreviewImageUploading=![],enableSubmitButton(),saveSellForm();else{if(_0x57c562)setFileInputStatus(previewImageStatus,_0x27b66b(0x108),_0x27b66b(0x10c)),previewImageUrlInput[_0x27b66b(0x129)]='',openPreviewImageWidgetBtn[_0x27b66b(0x162)]['add'](_0x27b66b(0x139)),previewImageContainer[_0x27b66b(0x162)]['add'](_0x27b66b(0x146)),currentPreviewImage[_0x27b66b(0xf6)]='',isPreviewImageUploading=![],enableSubmitButton();else{if(_0x4dffe0&&(_0x4dffe0[_0x27b66b(0xef)]===_0x27b66b(0xd7)||_0x4dffe0[_0x27b66b(0xef)]==='abort'))previewImageUrlInput[_0x27b66b(0x129)]===''&&(setFileInputStatus(previewImageStatus,_0x27b66b(0x111),'error'),openPreviewImageWidgetBtn['classList'][_0x27b66b(0x15f)](_0x27b66b(0x139))),isPreviewImageUploading=![],enableSubmitButton();else _0x4dffe0&&_0x4dffe0[_0x27b66b(0xef)]===_0x27b66b(0xbf)&&(setFileInputStatus(previewImageStatus,_0x27b66b(0x12e)+(_0x4dffe0['info'][_0x27b66b(0xbc)]||_0x27b66b(0x16c))+_0x27b66b(0x167),_0x27b66b(0xb0)),isPreviewImageUploading=!![],disableSubmitButton());}}});openPreviewImageWidgetBtn[_0x5d26ea(0x161)](_0x5d26ea(0xd0),()=>{previewImageWidget['open']();});function setFileInputStatus(_0x380418,_0x4097ad,_0x31fdb7=_0x5d26ea(0x18d)){const _0x24c5c4=_0x5d26ea;_0x380418[_0x24c5c4(0x192)]=_0x4097ad,_0x380418['classList'][_0x24c5c4(0x14b)](_0x24c5c4(0x15c),_0x24c5c4(0x10c),_0x24c5c4(0xb0));if(_0x31fdb7==='success')_0x380418['classList']['add']('success');else{if(_0x31fdb7===_0x24c5c4(0x10c))_0x380418[_0x24c5c4(0x162)]['add'](_0x24c5c4(0x10c));else{if(_0x31fdb7===_0x24c5c4(0xb0))_0x380418[_0x24c5c4(0x162)][_0x24c5c4(0x15f)](_0x24c5c4(0xb0));}}}function convertToGoogleDriveDirectDownload(_0x1218a6){const _0x2dddb8=_0x5d26ea;if(!_0x1218a6)return _0x1218a6;let _0x5aa4af=_0x1218a6;const _0x2f8a26=/drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)\/(view|edit|preview)/,_0x46e7b8=_0x1218a6[_0x2dddb8(0xf7)](_0x2f8a26);if(_0x46e7b8&&_0x46e7b8[0x1]){const _0x34dde7=_0x46e7b8[0x1];_0x5aa4af=_0x2dddb8(0x14e)+_0x34dde7;}else{if(_0x1218a6[_0x2dddb8(0xdf)]('drive.google.com/open?id=')){const _0x45daf7=_0x1218a6[_0x2dddb8(0xf7)](/id=([a-zA-Z0-9_-]+)/);if(_0x45daf7&&_0x45daf7[0x1]){const _0x4abf43=_0x45daf7[0x1];_0x5aa4af=_0x2dddb8(0x14e)+_0x4abf43;}}}return _0x5aa4af;}function validateSellForm(){const _0x8ce8ba=_0x5d26ea;let _0x51b08f=[];if(!titleInput['value'][_0x8ce8ba(0x101)]())_0x51b08f['push'](_0x8ce8ba(0x135));if(!descriptionInput[_0x8ce8ba(0x129)][_0x8ce8ba(0x101)]())_0x51b08f[_0x8ce8ba(0xb9)](_0x8ce8ba(0x144));if(isNaN(parseFloat(priceInput['value']))||parseFloat(priceInput['value'])<0x0)_0x51b08f[_0x8ce8ba(0xb9)](_0x8ce8ba(0x155));if(!productFileUrlInput[_0x8ce8ba(0x129)][_0x8ce8ba(0x101)]()||!/^https?:\/\/.+\..+/['test'](productFileUrlInput[_0x8ce8ba(0x129)][_0x8ce8ba(0x101)]()))_0x51b08f[_0x8ce8ba(0xb9)]('Valid\x20download\x20link\x20is\x20required.');if(!previewImageUrlInput[_0x8ce8ba(0x129)])_0x51b08f[_0x8ce8ba(0xb9)](_0x8ce8ba(0x186));if(!paypalEmailContainer[_0x8ce8ba(0x162)][_0x8ce8ba(0x107)](_0x8ce8ba(0x146))){const _0x557a8c=paypalEmailInput['value'][_0x8ce8ba(0x101)]();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/[_0x8ce8ba(0x163)](_0x557a8c))_0x51b08f[_0x8ce8ba(0xb9)](_0x8ce8ba(0xb3));}if(isPreviewImageUploading)_0x51b08f[_0x8ce8ba(0xb9)]('Please\x20wait\x20for\x20the\x20image\x20upload\x20to\x20finish.');return _0x51b08f;}function showFormErrors(_0x2ee1e5){const _0x58f047=_0x5d26ea;if(!_0x2ee1e5[_0x58f047(0x159)]){formErrorSummary[_0x58f047(0x162)][_0x58f047(0x15f)](_0x58f047(0x146)),formErrorSummary[_0x58f047(0xd6)]='';return;}formErrorSummary[_0x58f047(0x162)][_0x58f047(0x14b)](_0x58f047(0x146)),formErrorSummary[_0x58f047(0xd6)]=_0x58f047(0xd4)+_0x2ee1e5['map'](_0x5a895b=>_0x58f047(0x10e)+_0x5a895b+_0x58f047(0x191))[_0x58f047(0x152)]('')+'</ul>';}function enableSubmitButton(){const _0x3ebe02=_0x5d26ea,_0x57f66d=validateSellForm();showFormErrors(_0x57f66d),_0x57f66d['length']?(submitProductBtn[_0x3ebe02(0x124)]=!![],submitProductBtn[_0x3ebe02(0x162)][_0x3ebe02(0x15f)]('opacity-50',_0x3ebe02(0xab))):(submitProductBtn[_0x3ebe02(0x124)]=![],submitProductBtn['classList'][_0x3ebe02(0x14b)]('opacity-50',_0x3ebe02(0xab)));}function disableSubmitButton(){const _0x166190=_0x5d26ea;submitProductBtn[_0x166190(0x124)]=!![],submitProductBtn[_0x166190(0x162)][_0x166190(0x15f)]('opacity-50',_0x166190(0xab));}[titleInput,descriptionInput,priceInput,paypalEmailInput,previewImageUrlInput,productFileUrlInput]['forEach'](_0x48e389=>{const _0x23678f=_0x5d26ea;_0x48e389[_0x23678f(0x161)](_0x23678f(0x16e),enableSubmitButton);}),priceInput['addEventListener'](_0x5d26ea(0x16e),()=>{const _0x39b59b=_0x5d26ea,_0x3dae84=parseFloat(priceInput[_0x39b59b(0x129)]);isNaN(_0x3dae84)||_0x3dae84===0x0?(paypalEmailContainer[_0x39b59b(0x162)][_0x39b59b(0x15f)](_0x39b59b(0x146)),paypalEmailInput[_0x39b59b(0x183)]('required'),paypalEmailInput[_0x39b59b(0x129)]=''):(paypalEmailContainer[_0x39b59b(0x162)][_0x39b59b(0x14b)](_0x39b59b(0x146)),paypalEmailInput['setAttribute'](_0x39b59b(0xf1),_0x39b59b(0xf1))),enableSubmitButton(),saveSellForm();}),productUploadForm[_0x5d26ea(0x161)]('submit',async _0x591f84=>{const _0x547b51=_0x5d26ea;_0x591f84[_0x547b51(0xc4)](),disableSubmitButton(),submitProductBtn['textContent']='Listing...';const _0x58246f=validateSellForm();showFormErrors(_0x58246f);if(_0x58246f[_0x547b51(0x159)]){submitProductBtn['textContent']=_0x547b51(0x168),enableSubmitButton();return;}try{if(!auth[_0x547b51(0xf3)]){alert(_0x547b51(0xd5)),window[_0x547b51(0xd1)]['reload']();return;}const _0x2e5fea=convertToGoogleDriveDirectDownload(productFileUrlInput[_0x547b51(0x129)][_0x547b51(0x101)]()),_0x251f48={'title':titleInput[_0x547b51(0x129)][_0x547b51(0x101)](),'description':descriptionInput['value'][_0x547b51(0x101)](),'price':parseFloat(priceInput[_0x547b51(0x129)]),'fileUrl':_0x2e5fea,'previewImageUrl':previewImageUrlInput[_0x547b51(0x129)],'createdAt':serverTimestamp(),'sellerId':auth[_0x547b51(0xf3)]['uid'],'paypalEmail':paypalEmailInput[_0x547b51(0x129)][_0x547b51(0x101)]()};await addDoc(collection(db,'products'),_0x251f48),alert(_0x547b51(0x116)),localStorage[_0x547b51(0x102)](SELL_FORM_KEY),toggleProductForm(![]),await loadProducts('');if(auth[_0x547b51(0xf3)])await loadMyProducts(auth['currentUser'][_0x547b51(0x10a)]);}catch(_0x2f711c){showFormErrors([_0x547b51(0xea)]),console['error'](_0x547b51(0x176),_0x2f711c),alert('Failed\x20to\x20list\x20product.\x20Please\x20check\x20console\x20for\x20details.\x20(Check\x20Firestore\x20rules!)');}finally{enableSubmitButton(),submitProductBtn[_0x547b51(0x192)]='List\x20Product';}});async function loadProducts(_0x523714=''){const _0x645515=_0x5d26ea;productListContainer[_0x645515(0xd6)]='',noProductsMessage[_0x645515(0x192)]=_0x645515(0x13c),noProductsMessage['classList']['remove'](_0x645515(0x146));try{const _0x51fa80=query(collection(db,'products'),orderBy(_0x645515(0xb2),'desc')),_0x58cef9=await getDocs(_0x51fa80),_0x262c71=_0x58cef9[_0x645515(0x10f)][_0x645515(0xc5)](_0xc33c49=>({'id':_0xc33c49['id'],..._0xc33c49[_0x645515(0x158)]()}));window[_0x645515(0x194)]=_0x262c71;const _0x8d36c1=_0x523714[_0x645515(0xb8)](),_0x20b8e3=_0x262c71[_0x645515(0x148)](_0x597959=>(_0x597959[_0x645515(0xca)]||'')[_0x645515(0xb8)]()[_0x645515(0xdf)](_0x8d36c1)||(_0x597959[_0x645515(0x11a)]||'')[_0x645515(0xb8)]()[_0x645515(0xdf)](_0x8d36c1));renderProducts(_0x20b8e3,productListContainer,noProductsMessage,![]);}catch(_0x38773e){console[_0x645515(0x10c)](_0x645515(0x104),_0x38773e),noProductsMessage[_0x645515(0x192)]=_0x645515(0x175),noProductsMessage[_0x645515(0x162)][_0x645515(0x14b)](_0x645515(0x146));}}searchBar[_0x5d26ea(0x161)](_0x5d26ea(0x16e),()=>{const _0x3ae492=_0x5d26ea;if(!document[_0x3ae492(0x169)](_0x3ae492(0x17c))[_0x3ae492(0x162)][_0x3ae492(0x107)]('hidden')){const _0x4523ef=searchBar[_0x3ae492(0x129)][_0x3ae492(0x101)]()[_0x3ae492(0xb8)]();if(!window[_0x3ae492(0x194)])return;if(!_0x4523ef){renderProducts(window['allProducts'],productListContainer,noProductsMessage,![]);return;}const _0x2e2961=_0x4523ef['split'](/\s+/)[_0x3ae492(0x148)](Boolean),_0x5cb2c7=window[_0x3ae492(0x194)][_0x3ae492(0x148)](_0x3f43c7=>{const _0x20a5d4=_0x3ae492,_0x15e340=[_0x3f43c7[_0x20a5d4(0xca)]||'',_0x3f43c7[_0x20a5d4(0x11a)]||''][_0x20a5d4(0x152)]('\x20')[_0x20a5d4(0xb8)]();return _0x2e2961[_0x20a5d4(0x187)](_0x2adb2c=>_0x15e340[_0x20a5d4(0xdf)](_0x2adb2c));});_0x5cb2c7[_0x3ae492(0x159)]>0x0?(renderProducts(_0x5cb2c7,productListContainer,noProductsMessage,![]),noProductsMessage[_0x3ae492(0x162)][_0x3ae492(0x15f)](_0x3ae492(0x146))):(productListContainer[_0x3ae492(0xd6)]='',noProductsMessage[_0x3ae492(0x192)]=_0x3ae492(0x177),noProductsMessage[_0x3ae492(0x162)]['remove'](_0x3ae492(0x146)));}});function renderProducts(_0x135eb9,_0x137b0c,_0x4b9bf0,_0x56ad98=![]){const _0x513f37=_0x5d26ea;_0x137b0c[_0x513f37(0xd6)]='',_0x4b9bf0[_0x513f37(0x162)][_0x513f37(0x15f)](_0x513f37(0x146));if(!Array['isArray'](_0x135eb9)||_0x135eb9[_0x513f37(0x159)]===0x0){_0x4b9bf0[_0x513f37(0x162)][_0x513f37(0x14b)](_0x513f37(0x146)),_0x4b9bf0[_0x513f37(0x192)]=_0x56ad98?_0x513f37(0x15d):_0x513f37(0x189);return;}_0x135eb9['forEach'](_0x33f989=>{const _0x4807f2=_0x513f37,_0x4e41fb=document[_0x4807f2(0xba)](_0x4807f2(0xee));_0x4e41fb[_0x4807f2(0xce)]=_0x4807f2(0xaf)+(_0x56ad98?'':'interactive-card\x20border\x20border-transparent'),_0x4e41fb['setAttribute'](_0x4807f2(0xaa),_0x33f989['id']);const _0x5da06f=parseFloat(_0x33f989[_0x4807f2(0xad)])===0x0?_0x4807f2(0xac):'$'+parseFloat(_0x33f989[_0x4807f2(0xad)])[_0x4807f2(0x123)](0x2);let _0x57096f='';_0x56ad98&&(_0x57096f=_0x4807f2(0x11d)+_0x33f989['fileUrl']+_0x4807f2(0xd3)+(_0x33f989[_0x4807f2(0xca)]||'')[_0x4807f2(0x136)](/\s/g,'-')+_0x4807f2(0x154)+_0x33f989['id']+_0x4807f2(0xc2));_0x4e41fb[_0x4807f2(0xd6)]='\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x33f989[_0x4807f2(0x147)]||_0x4807f2(0x11e))+_0x4807f2(0x16b)+_0x33f989['title']+_0x4807f2(0x184)+_0x33f989[_0x4807f2(0xca)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x20text-sm\x20flex-grow\x20mb-2\x20overflow-hidden\x20overflow-ellipsis\x20whitespace-nowrap\x22>'+_0x33f989[_0x4807f2(0x11a)]+_0x4807f2(0x11b)+_0x5da06f+_0x4807f2(0x117)+_0x57096f+_0x4807f2(0xc3),_0x137b0c[_0x4807f2(0xcc)](_0x4e41fb);if(_0x56ad98){const _0x3bdef1=_0x4e41fb[_0x4807f2(0xb4)](_0x4807f2(0x138));_0x3bdef1&&_0x3bdef1[_0x4807f2(0x161)]('click',_0x231fdf=>{const _0x19fe83=_0x4807f2;_0x231fdf[_0x19fe83(0x113)]();const _0x28176f=_0x3bdef1[_0x19fe83(0x14f)](_0x19fe83(0xaa));if(_0x28176f)deleteProduct(_0x28176f);});}else _0x4e41fb['addEventListener'](_0x4807f2(0xd0),()=>{const _0x1a7a1d=_0x4807f2,_0x2a2419=_0x4e41fb[_0x1a7a1d(0x14f)](_0x1a7a1d(0xaa));if(_0x2a2419)showProductDetails(_0x2a2419);});});}async function deleteProduct(_0x118570){const _0x548c9c=_0x5d26ea;if(!confirm(_0x548c9c(0xe7)))return;try{await deleteDoc(doc(db,_0x548c9c(0xbe),_0x118570)),alert('Product\x20delisted\x20successfully!'),await loadProducts(''),await showDashboard();}catch(_0x29aa94){console[_0x548c9c(0x10c)](_0x548c9c(0xcf),_0x29aa94),alert(_0x548c9c(0x164));}}async function showProductDetails(_0x443f4d){const _0x21e993=_0x5d26ea;showTab(_0x21e993(0xec)),productDetailsError[_0x21e993(0x162)][_0x21e993(0x15f)](_0x21e993(0x146));try{const _0x3c9f4a=await getDoc(doc(db,'products',_0x443f4d));if(!_0x3c9f4a['exists']()){productDetailsError[_0x21e993(0x192)]=_0x21e993(0xb5),productDetailsError[_0x21e993(0x162)]['remove'](_0x21e993(0x146));return;}const _0x57d88a={'id':_0x3c9f4a['id'],..._0x3c9f4a['data']()};detailProductImage[_0x21e993(0xf6)]=_0x57d88a[_0x21e993(0x147)]||'https://via.placeholder.com/600x400?text=Product+Preview',detailProductTitle['textContent']=_0x57d88a['title'],detailProductDescription['textContent']=_0x57d88a[_0x21e993(0x11a)];const _0x2986d7=parseFloat(_0x57d88a[_0x21e993(0xad)])===0x0?_0x21e993(0xac):'$'+parseFloat(_0x57d88a['price'])[_0x21e993(0x123)](0x2);detailProductPrice[_0x21e993(0x192)]=_0x2986d7,detailActionButton[_0x21e993(0xce)]=_0x21e993(0x11c),detailActionButton[_0x21e993(0x124)]=![],parseFloat(_0x57d88a[_0x21e993(0xad)])>0x0?(detailActionButton[_0x21e993(0x141)][_0x21e993(0xf4)]='none',paypalButtonContainer[_0x21e993(0xd6)]='',typeof window[_0x21e993(0x156)]!=='undefined'&&window[_0x21e993(0x156)][_0x21e993(0xb6)]?window['paypal'][_0x21e993(0xb6)]({'createOrder':function(_0x46a4c3,_0x1568a3){const _0x558246=_0x21e993;return _0x1568a3[_0x558246(0xfa)]['create']({'purchase_units':[{'amount':{'value':_0x57d88a[_0x558246(0xad)][_0x558246(0x18f)]()},'description':_0x57d88a[_0x558246(0xca)]}]});},'onApprove':async function(_0x337ce6,_0x2b2641){const _0x3bb617=_0x21e993;try{const _0x1bea07=await fetch('/api/verify-payment',{'method':_0x3bb617(0x15e),'headers':{'Content-Type':_0x3bb617(0x114)},'body':JSON[_0x3bb617(0x11f)]({'orderID':_0x337ce6['orderID']})}),_0x578fd8=await _0x1bea07[_0x3bb617(0xf5)]();_0x1bea07['ok']?(alert('Payment\x20verified\x20by\x20'+_0x578fd8[_0x3bb617(0x142)][_0x3bb617(0xa9)][_0x3bb617(0xa8)]['given_name']+'!'),paypalButtonContainer['innerHTML']='<a\x20href=\x22'+_0x57d88a['fileUrl']+_0x3bb617(0x15b),await handleProductPurchase(_0x57d88a),sendSaleEmail({'to_email':_0x57d88a[_0x3bb617(0x16f)]||'Not\x20Provided','product_title':_0x57d88a['title']||_0x3bb617(0x170),'buyer_name':_0x578fd8[_0x3bb617(0x142)]['payer']&&_0x578fd8[_0x3bb617(0x142)][_0x3bb617(0xa9)]['name']&&_0x578fd8[_0x3bb617(0x142)][_0x3bb617(0xa9)]['name'][_0x3bb617(0x100)]?_0x578fd8['details'][_0x3bb617(0xa9)][_0x3bb617(0xa8)]['given_name']:_0x3bb617(0x170)})):(alert('Payment\x20verification\x20failed:\x20'+(_0x578fd8[_0x3bb617(0x13b)]||_0x3bb617(0xdc))),console[_0x3bb617(0x10c)](_0x3bb617(0xe1),_0x578fd8));}catch(_0x1b81a9){alert(_0x3bb617(0xbd)),console[_0x3bb617(0x10c)](_0x3bb617(0x195),_0x1b81a9);}},'onError':function(_0x3f481b){const _0x132bab=_0x21e993;alert(_0x132bab(0xe6)),console['error'](_0x3f481b);}})[_0x21e993(0x18a)]('#paypal-button-container'):paypalButtonContainer[_0x21e993(0xd6)]=_0x21e993(0x133)):(detailActionButton[_0x21e993(0x141)][_0x21e993(0xf4)]='',paypalButtonContainer[_0x21e993(0xd6)]='',detailActionButton[_0x21e993(0x192)]=_0x21e993(0x166),detailActionButton['classList'][_0x21e993(0x15f)](_0x21e993(0x103),_0x21e993(0x126),'text-white'),detailActionButton[_0x21e993(0x196)]=()=>{const _0x26b5f3=_0x21e993;window[_0x26b5f3(0xda)](_0x57d88a[_0x26b5f3(0x185)],'_blank');},detailActionButton['setAttribute'](_0x21e993(0x193),_0x21e993(0x149)+_0x57d88a[_0x21e993(0xca)]));}catch(_0x1c88e0){console[_0x21e993(0x10c)](_0x21e993(0xd9),_0x1c88e0),productDetailsError[_0x21e993(0x192)]=_0x21e993(0x179),productDetailsError['classList'][_0x21e993(0x14b)](_0x21e993(0x146));}}async function updateSellerBalance(_0x229386){const _0x5795c1=_0x5d26ea;try{const _0x2dd815=await getDoc(doc(db,'balances',_0x229386));let _0x45874a=0x0;_0x2dd815[_0x5795c1(0xe9)]()&&typeof _0x2dd815[_0x5795c1(0x158)]()[_0x5795c1(0x180)]===_0x5795c1(0x17a)&&(_0x45874a=_0x2dd815['data']()['balance']),sellerBalance[_0x5795c1(0x192)]='$'+_0x45874a['toFixed'](0x2);}catch(_0x3b729a){sellerBalance[_0x5795c1(0x192)]='$0.00';}}let balanceUnsub=null;function watchSellerBalance(_0x4ea30c){if(balanceUnsub)balanceUnsub();balanceUnsub=onSnapshot(doc(db,'balances',_0x4ea30c),_0x20d137=>{const _0x4c4747=_0x8c6b;let _0x173b01=0x0;if(_0x20d137['exists']()&&typeof _0x20d137[_0x4c4747(0x158)]()[_0x4c4747(0x180)]==='number')_0x173b01=_0x20d137[_0x4c4747(0x158)]()[_0x4c4747(0x180)];sellerBalance[_0x4c4747(0x192)]='$'+_0x173b01[_0x4c4747(0x123)](0x2);});}async function loadMyProducts(_0xda75a2){const _0x4a1a61=_0x5d26ea;myProductsContainer[_0x4a1a61(0xd6)]='',noMyProductsMessage[_0x4a1a61(0x162)][_0x4a1a61(0x15f)](_0x4a1a61(0x146));try{const _0x11b41e=query(collection(db,_0x4a1a61(0xbe)),where('sellerId','==',_0xda75a2)),_0x2d5ae5=await getDocs(_0x11b41e),_0x115523=_0x2d5ae5[_0x4a1a61(0x10f)][_0x4a1a61(0xc5)](_0x5bca7e=>({'id':_0x5bca7e['id'],..._0x5bca7e[_0x4a1a61(0x158)]()}));if(_0x115523['length']===0x0){noMyProductsMessage['classList'][_0x4a1a61(0x14b)](_0x4a1a61(0x146));return;}renderProducts(_0x115523,myProductsContainer,noMyProductsMessage,!![]);}catch(_0x112591){console['error'](_0x4a1a61(0x119),_0x112591),myProductsContainer[_0x4a1a61(0xd6)]=_0x4a1a61(0xb7)+_0x112591[_0x4a1a61(0x13b)]+_0x4a1a61(0xf9);}}function openEditProductModal(_0x55f2f8){const _0x3d6f94=_0x5d26ea;editProductIdInput[_0x3d6f94(0x129)]=_0x55f2f8['id'],editTitleInput[_0x3d6f94(0x129)]=_0x55f2f8['title'],editDescriptionInput[_0x3d6f94(0x129)]=_0x55f2f8[_0x3d6f94(0x11a)],editPriceInput[_0x3d6f94(0x129)]=_0x55f2f8[_0x3d6f94(0xad)],editFileUrlInput[_0x3d6f94(0x129)]=_0x55f2f8['fileUrl'],editProductModal[_0x3d6f94(0x162)][_0x3d6f94(0x14b)](_0x3d6f94(0x146));}function closeEditProductModal(){const _0x4f5819=_0x5d26ea;editProductModal[_0x4f5819(0x162)]['add']('hidden');}editProductForm[_0x5d26ea(0x134)]=async function(_0xc2297c){const _0x11e44b=_0x5d26ea;_0xc2297c[_0x11e44b(0xc4)]();const _0x56829e=editProductIdInput[_0x11e44b(0x129)],_0x195921={'title':editTitleInput['value'][_0x11e44b(0x101)](),'description':editDescriptionInput['value'][_0x11e44b(0x101)](),'price':parseFloat(editPriceInput['value']),'fileUrl':editFileUrlInput[_0x11e44b(0x129)]['trim']()};try{await updateDoc(doc(db,_0x11e44b(0xbe),_0x56829e),_0x195921),closeEditProductModal(),auth[_0x11e44b(0xf3)]&&await loadMyProducts(auth[_0x11e44b(0xf3)]['uid']);}catch(_0x28d005){alert(_0x11e44b(0x121));}},cancelEditBtn['onclick']=closeEditProductModal;async function showDashboard(){const _0xe88123=_0x5d26ea;if(!auth['currentUser'])return;showTab(_0xe88123(0x174)),await updateSellerBalance(auth[_0xe88123(0xf3)][_0xe88123(0x10a)]),watchSellerBalance(auth[_0xe88123(0xf3)]['uid']),await loadMyProducts(auth[_0xe88123(0xf3)]['uid']);}function _0x8c6b(_0x29fa7f,_0xea0747){const _0x4de19e=_0x4de1();return _0x8c6b=function(_0x8c6b57,_0xaeb8a4){_0x8c6b57=_0x8c6b57-0xa6;let _0xea4087=_0x4de19e[_0x8c6b57];return _0xea4087;},_0x8c6b(_0x29fa7f,_0xea0747);}async function incrementSellerBalance(_0x2d2d23,_0x4de09a){const _0x3aca39=_0x5d26ea,_0x4f61bf=doc(db,_0x3aca39(0x15a),_0x2d2d23);await runTransaction(db,async _0x20d8e8=>{const _0xd54680=_0x3aca39,_0x6f9b45=await _0x20d8e8[_0xd54680(0x110)](_0x4f61bf);let _0x81eb85=_0x4de09a;_0x6f9b45[_0xd54680(0xe9)]()&&typeof _0x6f9b45[_0xd54680(0x158)]()[_0xd54680(0x180)]===_0xd54680(0x17a)&&(_0x81eb85+=_0x6f9b45[_0xd54680(0x158)]()[_0xd54680(0x180)]),_0x20d8e8[_0xd54680(0x182)](_0x4f61bf,{'balance':_0x81eb85},{'merge':!![]});});}async function handleProductPurchase(_0x18b69b){const _0x1d00d1=_0x5d26ea;if(!_0x18b69b||!_0x18b69b[_0x1d00d1(0x188)]||!_0x18b69b[_0x1d00d1(0xad)])return;await incrementSellerBalance(_0x18b69b[_0x1d00d1(0x188)],parseFloat(_0x18b69b[_0x1d00d1(0xad)]));}loadProducts(),showTab(_0x5d26ea(0x17c)),enableSubmitButton();